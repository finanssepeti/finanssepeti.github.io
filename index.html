<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finans Sepeti - Profesyonel Finansal Analiz & Sosyal Ağ</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --bg-color: #e0e5ec;
            --shadow-light: #ffffff;
            --shadow-dark: #a3b1c6;
            --primary-blue: #2c3e50;
            --accent-green: #27ae60;
            --accent-red: #c0392b;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
            color: var(--primary-blue);
        }

        /* Neumorphism Tasarımı */
        .neu-card {
            background: var(--bg-color);
            border-radius: 20px;
            box-shadow: 10px 10px 20px var(--shadow-dark), -10px -10px 20px var(--shadow-light);
            padding: 20px;
            margin-bottom: 25px;
        }

        .neu-button {
            border: none;
            padding: 12px 25px;
            border-radius: 12px;
            background: var(--bg-color);
            box-shadow: 5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light);
            cursor: pointer;
            transition: 0.3s;
            font-weight: 600;
        }

        .neu-button:active {
            box-shadow: inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light);
        }

        /* Üst Menü */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .nav-menu {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        /* Canlı Fiyat Grid */
        .price-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .price-item {
            text-align: center;
            cursor: pointer;
        }

        .price-item h4 { margin: 0; font-size: 0.9rem; color: #666; }
        .price-item span { font-size: 1.2rem; font-weight: bold; color: var(--primary-blue); }

        /* Profil ve Sosyal Katman */
        .page-section { display: none; }
        .active { display: block; }

        .social-feed { display: grid; grid-template-columns: 1fr 2fr; gap: 20px; }

        input, select {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            border: none;
            background: #e0e5ec;
            box-shadow: inset 2px 2px 5px var(--shadow-dark), inset -2px -2px 5px var(--shadow-light);
        }

        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ccc; }

        #chart-container { height: 600px; margin-top: 20px; border-radius: 15px; overflow: hidden; }
    </style>
</head>
<body>

    <header>
        <button class="neu-button" onclick="showPage('profile-page')"><i class="fas fa-user-circle"></i> Profilim</button>
        <h1 style="margin: 0;">Finans Sepeti</h1>
        <div id="date-time" style="font-weight: 600;"></div>
    </header>

    <div class="nav-menu neu-card">
        <button class="neu-button" onclick="showPage('markets-page')"><i class="fas fa-chart-line"></i> Piyasalar</button>
        <button class="neu-button" onclick="showPage('invest-page')"><i class="fas fa-plus"></i> Yatırım Ekle</button>
        <button class="neu-button" onclick="showPage('portfolio-page')"><i class="fas fa-wallet"></i> Portföyüm</button>
        <button class="neu-button" onclick="showPage('analysis-page')"><i class="fas fa-microchip"></i> Teknik Analiz</button>
        <button class="neu-button" onclick="alert('Haberler Yakında!')"><i class="fas fa-newspaper"></i> Haberler</button>
    </div>

    <div id="markets-page" class="page-section active">
        <div class="neu-card">
            <h3>Canlı Veriler (Grafik için Tıklayın)</h3>
            <div class="price-grid" id="ticker-grid">
                </div>
        </div>
        <div class="neu-card" id="main-chart-box">
            <h3 id="chart-title">Grafik İzleme</h3>
            <div id="chart-container"></div>
        </div>
    </div>

    <div id="profile-page" class="page-section">
        <div class="social-feed">
            <div class="neu-card">
                <h3>Oturum Aç</h3>
                <button class="neu-button" style="width:100%; margin-bottom:10px;"><i class="fab fa-google"></i> Google ile Giriş</button>
                <button class="neu-button" style="width:100%;"><i class="fab fa-facebook"></i> Facebook ile Giriş</button>
                <hr>
                <h4>Profil Bilgilerim</h4>
                <p><b>Ad Soyad:</b> <span contenteditable="true">Misafir Kullanıcı</span></p>
                <p><b>Üniversite:</b> <input type="text" placeholder="Üniversite Yazın"></p>
                <p><b>Kurum:</b> <input type="text" placeholder="Çalıştığınız Yer"></p>
                
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button class="neu-button" onclick="alert('Mesaj Kutusu Boş')">Mesajlarım</button>
                    <button class="neu-button" onclick="alert('Arkadaş Bulucu')">Arkadaş Ekle</button>
                    <button class="neu-button" onclick="showPage('budget-page')">Gelir/Gider & EBITDA</button>
                </div>
            </div>
            <div class="neu-card">
                <h3>Paylaşımlar (Facebook Tarzı)</h3>
                <textarea class="neu-card" style="width:90%; height:80px;" placeholder="Ne düşünüyorsun?"></textarea>
                <button class="neu-button">Paylaş</button>
                <div id="feed-items" style="margin-top:20px;">
                    <div class="neu-card" style="font-size: 0.9rem;">
                        <b>Admin:</b> Hoş geldiniz! Finans sepetini hemen kullanmaya başlayabilirsiniz.
                        <div style="margin-top:10px;">
                            <button class="neu-button" style="padding:5px 10px;"><i class="fas fa-thumbs-up"></i> Beğen</button>
                            <button class="neu-button" style="padding:5px 10px;"><i class="fas fa-comment"></i> Yorum Yap</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="budget-page" class="page-section">
        <div class="neu-card">
            <h3>Yıllık Bütçe Planı & EBITDA</h3>
            <select id="budget-month" class="neu-button">
                <option>Ocak</option><option>Şubat</option><option>Mart</option>
                </select>
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px; margin-top:20px;">
                <div>
                    <h4>Gelirler (5 Kalem)</h4>
                    <div id="gelir-inputs"></div>
                    <strong>Toplam Gelir: <span id="total-income">0</span> TL</strong>
                </div>
                <div>
                    <h4>Giderler (Faturalar + Genel + Kart)</h4>
                    <div id="gider-inputs"></div>
                    <strong>Toplam Gider (Ebitda için): <span id="total-expense">0</span> TL</strong>
                </div>
            </div>
            <div class="neu-card" style="background: #2c3e50; color: white; margin-top:20px;">
                <h3>EBITDA: <span id="ebitda-val">0</span> TL</h3>
            </div>
        </div>
    </div>

    <div id="analysis-page" class="page-section">
        <div class="neu-card">
            <h3>Gelişmiş Teknik Analiz (TradingView)</h3>
            <p>RSI, MA50, MA200 ve Robot Sinyalleri Aktif</p>
            <div id="advanced-analysis-container" style="height: 700px;"></div>
        </div>
    </div>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        // Sayfa Değiştirme Fonksiyonu
        function showPage(pageId) {
            document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            if(pageId === 'analysis-page') loadTechnicalAnalysis();
        }

        // Canlı Ticker Listesi
        const symbols = [
            { name: "Altın/TL", sym: "FX_IDC:XAUTRYG" },
            { name: "Gümüş/TL", sym: "FX_IDC:XAGTRYG" },
            { name: "Dolar/TL", sym: "FX_IDC:USDTRY" },
            { name: "Euro/TL", sym: "FX_IDC:EURTRY" },
            { name: "BTC/USD", sym: "BITSTAMP:BTCUSD" },
            { name: "BIST 100", sym: "BIST:XU100" }
        ];

        function initTickers() {
            const grid = document.getElementById('ticker-grid');
            symbols.forEach(s => {
                const div = document.createElement('div');
                div.className = 'neu-card price-item';
                div.innerHTML = `<h4>${s.name}</h4><span>Tıkla Gör</span>`;
                div.onclick = () => loadChart(s.sym, s.name);
                grid.appendChild(div);
            });
        }

        // Grafik Yükleme (TradingView)
        function loadChart(symbol, label) {
            document.getElementById('chart-title').innerText = label + " - Canlı Grafik";
            new TradingView.widget({
                "autosize": true,
                "symbol": symbol,
                "interval": "15",
                "timezone": "Europe/Istanbul",
                "theme": "light",
                "style": "1",
                "locale": "tr",
                "toolbar_bg": "#f1f3f6",
                "enable_publishing": false,
                "hide_side_toolbar": false,
                "allow_symbol_change": true,
                "container_id": "chart-container"
            });
        }

        // Teknik Analiz Al-Sat Robotu Widget
        function loadTechnicalAnalysis() {
            new TradingView.widget({
                "width": "100%",
                "height": 700,
                "symbol": "BINANCE:BTCUSDT",
                "interval": "1H",
                "timezone": "Europe/Istanbul",
                "theme": "light",
                "style": "1",
                "locale": "tr",
                "container_id": "advanced-analysis-container",
                "studies": [
                    "RSI@tv-basicstudies",
                    "MASimple@tv-basicstudies", // MA50
                    "MASimple@tv-basicstudies"  // MA200
                ]
            });
        }

        // Bütçe Hesaplama Dinamikleri
        function initBudget() {
            const gIn = document.getElementById('gelir-inputs');
            const expIn = document.getElementById('gider-inputs');
            for(let i=1; i<=5; i++) {
                gIn.innerHTML += `<input type="number" class="inc-v" placeholder="Gelir Kalemi ${i} (TL)" oninput="calc()">`;
                expIn.innerHTML += `<input type="number" class="exp-v" placeholder="Gider Kalemi ${i} (TL)" oninput="calc()">`;
            }
        }

        function calc() {
            let inc = [...document.querySelectorAll('.inc-v')].reduce((a,b) => a + (Number(b.value)||0), 0);
            let exp = [...document.querySelectorAll('.exp-v')].reduce((a,b) => a + (Number(b.value)||0), 0);
            document.getElementById('total-income').innerText = inc;
            document.getElementById('total-expense').innerText = exp;
            document.getElementById('ebitda-val').innerText = inc - exp;
        }

        // Zaman Güncelleme
        setInterval(() => {
            const now = new Date();
            document.getElementById('date-time').innerText = now.toLocaleString('tr-TR');
        }, 1000);

        // Başlangıç
        window.onload = () => {
            initTickers();
            initBudget();
            loadChart("FX_IDC:XAUTRYG", "Altın/TL");
        };
    </script>
</body>
</html>
