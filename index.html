<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finans Sepeti - YatÄ±rÄ±mlarÄ±m</title>
    <style>
        :root { --accent: #00c6ff; --bg: #0f2027; --card-bg: rgba(255, 255, 255, 0.08); }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--bg); color: #fff; display: flex; justify-content: center; min-height: 100vh; }
        .container { width: 100%; max-width: 500px; padding: 15px; }
        .card { background: var(--card-bg); backdrop-filter: blur(12px); border-radius: 20px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1); }
        h2, h3 { text-align: center; margin-top: 0; color: var(--accent); }
        .tablo-baslik { font-size: 1.1em; border-bottom: 2px solid var(--accent); padding-bottom: 5px; margin: 20px 0 10px 0; font-weight: bold; }
        .data-table { width: 100%; border-collapse: collapse; font-size: 13px; }
        .data-table th { text-align: left; opacity: 0.7; padding-bottom: 10px; }
        .data-table td { padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .calc-input { width: 70px; padding: 6px; border-radius: 5px; border: none; background: rgba(255,255,255,0.2); color: #fff; text-align: center; outline: none; }
        .total-val { font-weight: bold; color: #00ff88; text-align: right; }
        .price-val { font-weight: 500; color: #f39c12; }
    </style>
</head>
<body onload="startLiveUpdates()">

<div class="container">
    <div class="card">
        <h2>Finans Sepeti</h2>
        <h3>ðŸ“Š YatÄ±rÄ±mlarÄ±m</h3>
        <p style="font-size: 11px; text-align: center; opacity: 0.6;">Fiyatlar 30 saniyede bir otomatik gÃ¼ncellenir.</p>
    </div>

    <div class="card">
        <div class="tablo-baslik">âœ¨ AltÄ±n & DÃ¶viz</div>
        <table class="data-table">
            <thead>
                <tr>
                    <th>VarlÄ±k</th>
                    <th>Fiyat (â‚º)</th>
                    <th>Adet/Gr</th>
                    <th style="text-align:right">Toplam</th>
                </tr>
            </thead>
            <tbody id="metal-body">
                </tbody>
        </table>
    </div>

    <div class="card">
        <div class="tablo-baslik">â‚¿ Kripto (Ä°lk 15)</div>
        <table class="data-table">
            <thead>
                <tr>
                    <th>VarlÄ±k</th>
                    <th>Fiyat ($)</th>
                    <th>Adet</th>
                    <th style="text-align:right">Toplam</th>
                </tr>
            </thead>
            <tbody id="crypto-body">
                </tbody>
        </table>
    </div>

    <div class="card">
        <div class="tablo-baslik">ðŸ“ˆ BIST 30 Hisseleri</div>
        <table class="data-table">
            <thead>
                <tr>
                    <th>Hisse</th>
                    <th>Fiyat (â‚º)</th>
                    <th>Lot</th>
                    <th style="text-align:right">Toplam</th>
                </tr>
            </thead>
            <tbody id="bist-body">
                </tbody>
        </table>
    </div>
</div>

<script>
    function calculate(input, price, targetId, symbol) {
        const qty = parseFloat(input.value) || 0;
        const total = qty * price;
        document.getElementById(targetId).innerText = total.toLocaleString(undefined, {minimumFractionDigits: 2}) + " " + symbol;
    }

    async function fetchCrypto() {
        try {
            const res = await fetch('https://api.binance.com/api/v3/ticker/price');
            const data = await res.json();
            const list = ['BTCUSDT', 'ETHUSDT', 'BNBUSDT', 'SOLUSDT', 'XRPUSDT', 'ADAUSDT', 'AVAXUSDT', 'DOGEUSDT', 'DOTUSDT', 'TRXUSDT', 'LINKUSDT', 'MATICUSDT', 'SHIBUSDT', 'LTCUSDT', 'NEARUSDT'];
            
            let html = '';
            data.filter(i => list.includes(i.symbol)).forEach(coin => {
                const name = coin.symbol.replace('USDT', '');
                const price = parseFloat(coin.price);
                html += `<tr>
                    <td><b>${name}</b></td>
                    <td class="price-val">${price < 1 ? price.toFixed(4) : price.toFixed(2)}</td>
                    <td><input type="number" class="calc-input" placeholder="0" oninput="calculate(this, ${price}, 'c-${name}', '$')"></td>
                    <td class="total-val" id="c-${name}">0.00 $</td>
                </tr>`;
            });
            document.getElementById('crypto-body').innerHTML = html;
        } catch (err) { console.log("Kripto hatasÄ±"); }
    }

    function fetchMetals() {
        // DÃ¶viz ve AltÄ±n iÃ§in Ã¶rnek gÃ¼ncel temsilÃ® fiyatlar
        const data = [
            {n: 'Gram AltÄ±n', p: 3048.50},
            {n: 'Ons AltÄ±n ($)', p: 2024.10},
            {n: 'Ã‡eyrek AltÄ±n', p: 5125.00},
            {n: 'GÃ¼mÃ¼ÅŸ (Gr)', p: 38.60},
            {n: 'ABD DolarÄ±', p: 30.25}
        ];
        let html = '';
        data.forEach((m, i) => {
            html += `<tr>
                <td><b>${m.n}</b></td>
                <td class="price-val">${m.p.toFixed(2)}</td>
                <td><input type="number" class="calc-input" placeholder="0" oninput="calculate(this, ${m.p}, 'm-${i}', 'â‚º')"></td>
                <td class="total-val" id="m-${i}">0.00 â‚º</td>
            </tr>`;
        });
        document.getElementById('metal-body').innerHTML = html;
    }

    function fetchBist() {
        const stocks = ['THYAO', 'EREGL', 'ASELS', 'AKBNK', 'ISCTR', 'KCHOL', 'SISE', 'BIMAS', 'TUPRS', 'SASAD'];
        let html = '';
        stocks.forEach((s, i) => {
            const mockPrice = (Math.random() * 200 + 10).toFixed(2); // BIST iÃ§in temsilÃ® fiyat
            html += `<tr>
                <td><b>${s}</b></td>
                <td class="price-val">${mockPrice}</td>
                <td><input type="number" class="calc-input" placeholder="0" oninput="calculate(this, ${mockPrice}, 'b-${i}', 'â‚º')"></td>
                <td class="total-val" id="b-${i}">0.00 â‚º</td>
            </tr>`;
        });
        document.getElementById('bist-body').innerHTML = html;
    }

    function startLiveUpdates() {
        fetchCrypto();
        fetchMetals();
        fetchBist();
        setInterval(() => {
            fetchCrypto();
            fetchMetals();
        }, 30000);
    }
</script>
</body>
</html>
