<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finans Sepeti - Profesyonel Finans Portalı</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    
    <style>
        :root {
            --bg: #e0e5ec;
            --shadow: 9px 9px 16px rgb(163,177,198,0.6), -9px -9px 16px rgba(255,255,255, 0.5);
            --inner-shadow: inset 6px 6px 12px #a3b1c6, inset -6px -6px 12px #ffffff;
            --primary: #2c3e50;
        }

        body { font-family: 'Inter', sans-serif; background-color: var(--bg); margin: 0; padding: 20px; color: var(--primary); }
        .neu-card { background: var(--bg); border-radius: 20px; box-shadow: var(--shadow); padding: 20px; margin-bottom: 20px; }
        .neu-btn { background: var(--bg); border: none; padding: 10px 20px; border-radius: 12px; box-shadow: var(--shadow); cursor: pointer; font-weight: 600; color: var(--primary); transition: 0.2s; }
        .neu-btn:active { box-shadow: var(--inner-shadow); transform: scale(0.98); }
        .neu-input { background: var(--bg); border: none; padding: 12px; border-radius: 10px; box-shadow: var(--inner-shadow); width: 100%; box-sizing: border-box; margin-bottom: 10px; }
        
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .nav-bar { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 30px; }
        .page-content { display: none; }
        .active { display: block; }

        /* Piyasalar Izgarası */
        .market-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 15px; }
        .market-item { text-align: center; cursor: pointer; padding: 15px; border-radius: 15px; }
        .market-item:hover { box-shadow: var(--inner-shadow); }

        /* Login Modal */
        #auth-modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2000; width: 350px; text-align: center; }
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; }

        #tv-chart-container { height: 500px; border-radius: 15px; overflow: hidden; margin-top: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { padding: 12px; border-bottom: 1px solid #c2c9d6; text-align: left; }
    </style>
</head>
<body>

<div class="overlay" id="overlay"></div>

<header>
    <button class="neu-btn" onclick="openLogin()"><i class="fas fa-user"></i> Profilim</button>
    <h2 style="letter-spacing: 2px;">FİNANS SEPETİ</h2>
    <div id="live-clock"></div>
</header>

<div class="nav-bar neu-card">
    <button class="neu-btn" onclick="showPage('markets-page')">Piyasalar</button>
    <button class="neu-btn" onclick="showPage('add-investment')">Yatırım Ekle</button>
    <button class="neu-btn" onclick="showPage('portfolio-page')">Portföyüm</button>
    <button class="neu-btn" onclick="showPage('analysis-page')">Teknik Analiz</button>
    <button class="neu-btn" onclick="toggleNews()">Haberler</button>
</div>

<div id="auth-modal" class="neu-card">
    <h3 id="auth-title">Giriş Onayı</h3>
    <p id="auth-text">Devam etmek için onay verin.</p>
    <input type="email" id="auth-email" class="neu-input" placeholder="E-posta veya Kullanıcı Adı">
    <button class="neu-btn" onclick="confirmLogin()" style="width: 100%; background: #27ae60; color: white;">Devam Et ve Oturum Aç</button>
    <button class="neu-btn" onclick="closeLogin()" style="width: 100%; margin-top: 10px;">İptal</button>
</div>

<div id="markets-page" class="page-content active">
    <div class="neu-card market-grid">
        <div class="market-item" onclick="updateChart('FX_IDC:XAUTRYG')"><h4>Altın/TL</h4></div>
        <div class="market-item" onclick="updateChart('FX:XAUUSD')"><h4>Altın/Ons</h4></div>
        <div class="market-item" onclick="updateChart('FX_IDC:XAGTRYG')"><h4>Gümüş/TL</h4></div>
        <div class="market-item" onclick="updateChart('FX:XAGUSD')"><h4>Gümüş/Ons</h4></div>
        <div class="market-item" onclick="updateChart('FX_IDC:XPDTRYG')"><h4>Paladyum/TL</h4></div>
        <div class="market-item" onclick="updateChart('FX_IDC:XPTTRYG')"><h4>Platin/TL</h4></div>
        <div class="market-item" onclick="updateChart('COMEX:HGT1!')"><h4>Bakır/TL</h4></div>
        <div class="market-item" onclick="updateChart('FX_IDC:USDTRY')"><h4>Dolar/TL</h4></div>
        <div class="market-item" onclick="updateChart('BINANCE:BTCTRY')"><h4>BTC/TL</h4></div>
        <div class="market-item" onclick="updateChart('BINANCE:BTCUSDT')"><h4>BTC/USD</h4></div>
        <div class="market-item" onclick="updateChart('BIST:XU100')"><h4>Bist 100</h4></div>
    </div>
    <div id="tv-chart-container" class="neu-card"></div>
</div>

<div id="profile-page" class="page-content">
    <div class="neu-card" style="max-width: 600px; margin: auto;">
        <h3>Profil Bilgilerim</h3>
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <p><b>Adı:</b> <span id="p-ad">Yusuf</span></p>
            <p><b>Soyadı:</b> <span id="p-soyad">Kaya</span></p>
            <p><b>Üniversite:</b> <input class="neu-input" placeholder="Üniversite Giriniz"></p>
            <p><b>Çalıştığı Kurum:</b> <input class="neu-input" placeholder="Kurum Giriniz"></p>
            <p><b>Mail Adresi:</b> <span id="p-mail">yusuf@mail.com</span></p>
            <p><b>Hobilerim:</b> <textarea class="neu-input"></textarea></p>
        </div>
        <hr>
        <div class="nav-bar">
            <button class="neu-btn" onclick="alert('Mesajlarınız Yükleniyor')">Mesajlarım</button>
            <button class="neu-btn" onclick="showPage('budget-section')">Gelir/Gider & EBITDA</button>
        </div>
    </div>
</div>

<div id="add-investment" class="page-content">
    <div class="neu-card">
        <h3>Yatırım Ekle</h3>
        <div class="nav-bar">
            <button class="neu-btn" onclick="setInvestType('Emtia')">Emtialar</button>
            <button class="neu-btn" onclick="setInvestType('Hisse')">Hisseler</button>
            <button class="neu-btn" onclick="setInvestType('Fon')">Fonlar</button>
            <button class="neu-btn" onclick="setInvestType('Koin')">Koinler</button>
        </div>
        <div class="neu-card" id="invest-form">
            <h4 id="invest-title">Varlık Seçin</h4>
            <input type="text" id="inv-name" class="neu-input" placeholder="Varlık Adı (Örn: Altın veya BTC)">
            <input type="number" id="inv-amount" class="neu-input" placeholder="Adet / Gram">
            <input type="number" id="inv-price" class="neu-input" placeholder="Yatırılan Tutar (Birim Fiyat)">
            <input type="date" id="inv-date" class="neu-input">
            <button class="neu-btn" onclick="saveInvestment()" style="background:#27ae60; color:white;">Portföye Ekle</button>
        </div>
    </div>
</div>

<div id="portfolio-page" class="page-content">
    <div class="neu-card">
        <div style="display:flex; justify-content:space-between;">
            <h3>Portföyüm & Analiz</h3>
            <button class="neu-btn" onclick="exportExcel()"><i class="fas fa-file-excel"></i> Excel İndir</button>
        </div>
        <div class="nav-bar">
            <button class="neu-btn">Aylık Portföy</button>
            <button class="neu-btn">Yıllık Portföy</button>
        </div>
        <table id="portfolio-table">
            <thead>
                <tr>
                    <th>Varlık</th><th>Miktar</th><th>Alış Fiyatı</th><th>Güncel</th><th>Kâr/Zarar</th>
                </tr>
            </thead>
            <tbody id="portfolio-body"></tbody>
        </table>
    </div>
</div>

<div id="analysis-page" class="page-content">
    <div class="neu-card" id="trading-robot-container" style="height: 700px;"></div>
</div>

<div id="news-sidebar" style="display:none; position:fixed; right:0; top:0; width:350px; height:100vh; background:var(--bg); box-shadow:-5px 0 15px rgba(0,0,0,0.2); z-index:3000; padding:20px; overflow-y:auto;">
    <button class="neu-btn" onclick="toggleNews()">Kapat</button>
    <h3>Bloomberg Haber Akışı</h3>
    <div id="news-list"></div>
</div>

<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
<script>
    let portfolio = JSON.parse(localStorage.getItem('myPortfolio')) || [];
    let currentInvestType = "";

    // GİRİŞ FONKSİYONLARI
    function openLogin() {
        document.getElementById('overlay').style.display = 'block';
        document.getElementById('auth-modal').style.display = 'block';
    }
    function closeLogin() {
        document.getElementById('overlay').style.display = 'none';
        document.getElementById('auth-modal').style.display = 'none';
    }
    function confirmLogin() {
        alert("Giriş Başarılı! Profilinize yönlendiriliyorsunuz.");
        closeLogin();
        showPage('profile-page');
    }

    // SAYFA YÖNETİMİ
    function showPage(pageId) {
        document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        if(pageId === 'portfolio-page') renderPortfolio();
        if(pageId === 'analysis-page') loadRobot();
    }

    // PİYASA GRAFİKLERİ
    function updateChart(symbol) {
        new TradingView.widget({
            "autosize": true, "symbol": symbol, "interval": "15",
            "timezone": "Europe/Istanbul", "theme": "light", "style": "1",
            "locale": "tr", "container_id": "tv-chart-container"
        });
    }

    // YATIRIM SİSTEMİ
    function setInvestType(type) {
        currentInvestType = type;
        document.getElementById('invest-title').innerText = type + " Bilgileri";
    }

    function saveInvestment() {
        const item = {
            type: currentInvestType,
            name: document.getElementById('inv-name').value,
            amount: document.getElementById('inv-amount').value,
            price: document.getElementById('inv-price').value,
            date: document.getElementById('inv-date').value
        };
        portfolio.push(item);
        localStorage.setItem('myPortfolio', JSON.stringify(portfolio));
        alert("Yatırım Kaydedildi!");
    }

    function renderPortfolio() {
        const body = document.getElementById('portfolio-body');
        body.innerHTML = "";
        portfolio.forEach(item => {
            body.innerHTML += `<tr>
                <td>${item.name}</td><td>${item.amount}</td><td>${item.price} TL</td>
                <td>Canlı Çekiliyor...</td><td style="color:green">+1.2%</td>
            </tr>`;
        });
    }

    // TEKNİK ROBOT
    function loadRobot() {
        new TradingView.widget({
            "width": "100%", "height": 650, "symbol": "BIST:XU100", "interval": "1H",
            "theme": "light", "container_id": "trading-robot-container",
            "studies": ["RSI@tv-basicstudies", "MASimple@tv-basicstudies", "BollingerBandsLower@tv-basicstudies"]
        });
    }

    // HABERLER (Bloomberg Simülasyonu)
    function toggleNews() {
        const side = document.getElementById('news-sidebar');
        side.style.display = side.style.display === 'none' ? 'block' : 'none';
        const list = document.getElementById('news-list');
        const news = [
            {t: "10:30", h: "Bloomberg: Altın Ons fiyatı direnci zorluyor", l: "https://www.bloomberght.com/altin"},
            {t: "10:15", h: "BIST 100 açılış verileri açıklandı", l: "https://www.bloomberght.com/borsa"},
            {t: "09:45", h: "Kripto paralarda Gate.io hacim artışı", l: "https://www.bloomberght.com/kripto"}
        ];
        list.innerHTML = news.map(n => `<div class="neu-card" onclick="window.open('${n.l}')" style="cursor:pointer">
            <small>${n.t}</small><br><b>${n.h}</b></div>`).join('');
    }

    function exportExcel() {
        var wb = XLSX.utils.table_to_book(document.getElementById('portfolio-table'));
        XLSX.writeFile(wb, 'Portfoyum.xlsx');
    }

    window.onload = () => {
        updateChart('FX_IDC:XAUTRYG');
        setInterval(() => { document.getElementById('live-clock').innerText = new Date().toLocaleString(); }, 1000);
    };
</script>
</body>
</html>
